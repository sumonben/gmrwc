{% extends 'basepage/certificate_layout.html' %}
{% block content %}
{% load static %}
    <!-- CONTAINER -->
    <div class="box_container" style="width: 100%; margin: 0px;">
      <div class="" style="margin: auto;width: 100%;">
         
          <div >
    <form class="needs-validation" id="form-wrapper" action="{% url 'payfor-certificate' %}" method="post" name="form-wrapper" novalidate="">
          {% csrf_token %}
              <div id="qbox-container">
                      <div id="steps-container">
                         
                            <div class="mt-5">
                             
                                <h4>Success! Your payment for certificate is done!</h4>
                                <h5>After Fact Checking you will able to download your certificate  </h5>
                                <h4>To download certificate you need your phone number and trnasaction ID which is sent to your mobile </h4>
                            </div>
                          
                        </div>

                     
                          
              
                          
                      
                  </div>
                      <div id="q-box__buttons" >
                        
                        <button id="submit-btn" type="submit" class="d-none">Submit</button>
                    </div>   
              </div>
              
            </form>

            <div id="download_form_id">
              <div class="mt-5">

                <form id="form_download_id" method="post" action="{% url 'form-download' %}" target="_blank" >
                  {% csrf_token %}
                <input type="hidden" value="" id="student_id" name="student_id">
                <div id="q-box__buttons" >

                  <button type="submit" id="btn_admission_form" style="width:300px;">Download Admission form</button>
                  </div>
                </form>
                  <a style="margin-top: 20px; margin-bottom: 20px; margin-left: 10%;" class="back-link" href="{% url 'choice-certificate'%}">Go back from the beginning ➜</a>
              </div>
          </div>

          </div>
      </div>
  </div>
  <!-- PRELOADER -->
  <div id="preloader-wrapper">
    <div id="preloader"></div>
    <div class="preloader-section section-left"></div>
    <div class="preloader-section section-right"></div>
</div>
  
                      
                 
    <div id="toast-container" class="toast-top-center" aria-level="polite" role="alert">
      <div class="toast toast-error" ><button class="toast-close-button" role="button">&#10006;</button>
          <div class="toast-message" >দুঃখিত! লাল চিহ্নিত বক্সে সঠিক তথ্য দিতে হবে</div></div>
  </div>


  <script>
          
          
            




const progress = (value) => {
   document.getElementsByClassName('progress-bar')[0].style.width = `${value}%`;
}

   let preloader = document.getElementById('preloader-wrapper');
   let bodyElement = document.querySelector('body');
   let succcessDiv = document.getElementById('success');
   let submitBtn = document.getElementById('submit-btn');
   let downloadDiv = document.getElementById('downlod_form_id');
   submitBtn.classList.remove('d-none');
   submitBtn.classList.add('d-inline-block');
   //form.onsubmit = () => { return false }

   
/*submitBtn.addEventListener('click', () => {
    //preloader.classList.add('d-block');

     ///////////////////Submit student form Ajax code///////////////////

     var frm = $('#form-wrapper')[0];
     var form= new FormData(frm);

     var csrfToken = $('[name="csrfmiddlewaretoken"]').val();

     // Get the data from the form
    

     // Send AJAX request
     $.ajax({
         enctype: 'multipart/form-data',
         type: 'POST',
         url: "{% url 'admission_form_submit' %}",  // Adjust the URL as per your project structure
         data: form1,
         headers: {
             'X-CSRFToken': csrfToken
         },
         
         cache:false,
         processData:false,
         contentType:false,
        
         success: function (response) {
             
             //document.getElementById("student_form").reset();
             if (response.status === 'success') {
                 // Clear the form
                
                alert(response.status);


             } else {
              alert("Success message not found");
                     
                 }
                 
         },
         error: function (xhr, status, error) {
            
             var err = eval("(" + xhr.responseText + ")");
             alert(err.Message);
         }
     });


    //////////////////////////////////////////////////////////////////
    const timer = ms => new Promise(res => setTimeout(res, ms));

    timer(3000)
      .then(() => {
           bodyElement.classList.add('loaded');
      }).then(() =>{
          step[stepCount].classList.remove('d-block');
          step[stepCount].classList.add('d-none');
          prevBtn.classList.remove('d-inline-block');
          prevBtn.classList.add('d-none');
          submitBtn.classList.remove('d-inline-block');
          submitBtn.classList.add('d-none');
          succcessDiv.classList.remove('d-none');
          succcessDiv.classList.add('d-block');
      })
      
});*/




</script>
<script>
    $(document).ready(function () {
            
            
            preloader.classList.add('d-block');
            
           //////////////////////////////////////////////////////////////////
           const timer = ms => new Promise(res => setTimeout(res, ms));
       
           timer(3000)
             .then(() => {
                  bodyElement.classList.add('loaded');
             }).then(() =>{

                 step[stepCount].classList.remove('d-block');
                 step[stepCount].classList.add('d-none');
                 prevBtn.classList.remove('d-inline-block');
                 prevBtn.classList.add('d-none');
                 submitBtn.classList.remove('d-inline-block');
                 submitBtn.classList.add('d-none');
                 succcessDiv.classList.remove('d-none');
                 succcessDiv.classList.add('d-block');
                 $('#download_form_id').attr('class','d-block')
                 
             })
            
////////////////////Submit for admission form download/////////////////////

           

          });
        </script>
        
    
    {% endblock %}